<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2023-07-28 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20230728" />
    <meta http-equiv="Content-Language" content="en" />
    <title>OGC CDB 1.0 Executable Conformance Test Suite &#x2013; How to Deploy to TEAM Engine</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://cite.opengeospatial.org/" id="bannerLeft">
                                                                                                <img src="./img/ogc-logo.png"  alt="OGC CDB 1.0 Executable Conformance Test Suite"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2023-07-28
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.1
                      </li>
                      
              
      
                                    
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/ets-cdb10/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="changelog.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
                
      <li>
  
                          <a href="how_to_eclipse.html" title="Running with Eclipse IDE">
          <span class="none"></span>
        Running with Eclipse IDE</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Running with TEAM Engine</a>
          </li>
                
      <li>
  
                          <a href="how_to_jar.html" title="Running with JAR Tool">
          <span class="none"></span>
        Running with JAR Tool</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                  
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>How to Deploy to TEAM Engine</h1>
<p><a class="externalLink" href="https://github.com/opengeospatial/teamengine">TEAM Engine</a> is a Java web application for running OGC conformance tests with a web interface. It supports the installation of multiple test suites, and stores the results of past test runs. It can also be ran from the command line, although you may want to run the tests using the test suite command line JAR interface instead.</p>
<p>OGC provides an online version of TEAM Engine for public use, however this is not useful for CDB users as the CDB cannot be uploaded over HTTP due to either security/privacy concerns or requiring too much bandwidth. Instead, a local installation of TEAM Engine can be installed that can test CDBs located on the same machine or network.</p>
<div class="section">
<h2><a name="Installing_TEAM_Engine"></a>Installing TEAM Engine</h2>
<p>There is an <a class="externalLink" href="https://github.com/opengeospatial/teamengine/blob/master/doc/en/index.rst">installation guide</a> which works if you follow the steps and versions exactly. It covers instructions for Windows and Linux/UNIX users.</p>
<p>If you want to use a newer version of Apache Tomcat, you <b>must</b> use an updated version of the <tt>context.xml</tt> for Tomcat webapps; I <a class="externalLink" href="https://gist.github.com/openfirmware/6cea747d445ff29d9e2c5597c6cbdef8">have one that I have tested to work</a>.</p>
<p>If you want the short version of the TEAM Engine installation guide:</p>

<ol style="list-style-type: decimal">
  
<li>Install Oracle JDK 8</li>
  
<li>Install Apache Tomcat 7 or newer (see note above about context.xml)</li>
  
<li>Create a base directory for Team Engine, and set the <tt>TE_BASE</tt> Java property for Tomcat to point to that directory</li>
  
<li>(Optional) Install Tomcat native and Apache Portable Runtime if you want to support newest versions of TLS and HTTP/2</li>
  
<li>Checkout TEAM Engine from GitHub</li>
  
<li>Install latest Apache Maven</li>
  
<li>Use Maven to compile TEAM Engine</li>
  
<li>Extract TEAM Engine console base archive and TEAM Engine console binaries to <tt>TE_BASE</tt></li>
  
<li>Checkout <a class="externalLink" href="https://github.com/opengeospatial/ets-resources">ETS Resources</a> from GitHub</li>
  
<li>Use Maven to compile ETS Resources</li>
  
<li>Extract ETS Resources binaries/libraries to <tt>TE_BASE</tt></li>
  
<li>Use Maven to create WAR file for TEAM Engine</li>
  
<li>Install TEAM Engine WAR file in Tomcat</li>
  
<li>Install TEAM Engine common libraries to Tomcat library directory</li>
  
<li>(Optional) Install replacement Tomcat context.xml for TEAM Engine</li>
</ol>
<p>Tomcat should be up and running on port 8080, and TEAM Engine should be accessible under the <tt>/teamengine</tt> path. If you have any issues, check the Tomcat log files (usually in the <tt>logs/catalina.out</tt> file) for errors and warnings.</p></div>
<div class="section">
<h2><a name="Install_ETS-CDB10"></a>Install ETS-CDB10</h2>
<p>By default TEAM Engine will include a sample test suite, but we need to install the CDB test suite. Use git to checkout the repository from GitHub:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ git clone https://github.com/opengeospatial/ets-cdb10.git
</pre></div></div>
<p>Then use maven to build the package:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ cd ets-cdb10
$ mvn install
</pre></div></div>
<p>Extract the TEAM Engine CTL scripts from <tt>target/ets-cdb10-0.5-SNAPSHOT-ctl.zip</tt> into the <tt>TE_BASE/scripts/</tt> directory. The scripts directory should look like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">scripts/
  cdb10
  note
</pre></div></div>
<p>Next install the CDB10 ETS dependencies from <tt>target/ets-cdb10-0.5-SNAPSHOT-deps.zip</tt> by unpackaging <tt>ets-cdb10-0.5-SNAPSHOT-deps.zip</tt> and then copying all of the jar files to the <tt>/WEB-INF/lib</tt> folder of teamengine webapp.</p>
<p>It is possible a duplicate SLF4J library is installed into TEAM Engine. If the file <tt>TE_BASE/lib/slf4j-log4j12-1.7.6.jar</tt> exists, delete it. If you do not then TEAM Engine will not start.</p>
<p>Now we need to create a <tt>config.xml</tt> file for TEAM Engine to read the new test suite. Create the file <tt>TE_BASE/config.xml</tt> with the following contents:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;config&gt;
    &lt;scripts&gt;
        &lt;organization&gt;
            &lt;name&gt;OGC&lt;/name&gt;
            &lt;standard&gt;
                &lt;name&gt;Test suite: ets-cdb10&lt;/name&gt;
                &lt;version&gt;
                    &lt;name&gt;1.0&lt;/name&gt;
                    &lt;suite&gt;
                        &lt;namespace-uri&gt;http://www.opengis.net/cite/cdb10&lt;/namespace-uri&gt;
                        &lt;prefix&gt;tns&lt;/prefix&gt;
                        &lt;local-name&gt;ets-cdb10-0.5-SNAPSHOT&lt;/local-name&gt;
                        &lt;title&gt;Test suite ets-cdb10&lt;/title&gt;
                        &lt;description&gt;Describe scope of testing.&lt;/description&gt;
                    &lt;/suite&gt;
                    &lt;revision&gt;
                        &lt;name&gt;0.5-SNAPSHOT&lt;/name&gt;
                        &lt;status&gt;Beta&lt;/status&gt;
                        &lt;sources&gt;
                            &lt;source&gt;cdb10/1.0/ctl&lt;/source&gt;
                        &lt;/sources&gt;
                        &lt;webdir&gt;cdb10/1.0/site&lt;/webdir&gt;
                    &lt;/revision&gt;
                &lt;/version&gt;
            &lt;/standard&gt;
        &lt;/organization&gt;
    &lt;/scripts&gt;
&lt;/config&gt;
</pre></div></div>
<p>(If you have other test suites you want to enable, then they also need to be included in this XML file by placing them as an additional <tt>/config/scripts/organisation/standard</tt> element i.e. there should be only one organisation in the script)</p>
<p>Next make sure Tomcat has read access to <tt>TE_BASE</tt>. On Linux/UNIX you can make <tt>TE_BASE</tt> readable by all users.</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ sudo chmod -R +r TE_BASE
</pre></div></div>
<p>Now reload Tomcat and TEAM Engine should include ETS CDB10 as a test suite.</p>
<p><img src="img/team-engine-with-ets-cdb10.png" alt="TEAM Engine with ETS CDB10 Support" /></p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2023
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>