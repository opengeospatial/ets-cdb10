<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2023-07-28 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20230728" />
    <meta http-equiv="Content-Language" content="en" />
    <title>OGC CDB 1.0 Executable Conformance Test Suite &#x2013; How to Use as a JAR</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://cite.opengeospatial.org/" id="bannerLeft">
                                                                                                <img src="./img/ogc-logo.png"  alt="OGC CDB 1.0 Executable Conformance Test Suite"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2023-07-28
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.1
                      </li>
                      
              
      
                                    
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/ets-cdb10/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="changelog.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
                
      <li>
  
                          <a href="how_to_eclipse.html" title="Running with Eclipse IDE">
          <span class="none"></span>
        Running with Eclipse IDE</a>
            </li>
                
      <li>
  
                          <a href="how_to_team_engine.html" title="Running with TEAM Engine">
          <span class="none"></span>
        Running with TEAM Engine</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Running with JAR Tool</a>
          </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                  
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>How to Use as a JAR</h1>
<p>The test suite can be deployed as a single JAR file, which allows you to test while installing minimal dependencies. Users who want to test CDBs with only needing a JVM should use the JAR command line interface. It is also the most secure option, if secure JAR deployment procedures are followed.</p>
<p>There are two steps. </p>

<ol style="list-style-type: decimal">
  
<li>Build the JAR, which requires a Java Development Kit (JDK) and Maven</li>
  
<li>Copy the JAR to the testing machine, which only requires a Java Virtual Machine (JVM)</li>
</ol>
<p>The test output is TestNG formatted XML files.</p>
<div class="section">
<h2><a name="Building_the_JAR"></a>Building the JAR</h2>
<p>You will need to install <a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle JDK</a> 7 or newer. Other JDKs such as <a class="externalLink" href="http://openjdk.java.net">OpenJDK</a> may work, but I have not tested it. JDKs are available for nearly every platform.</p>
<p>Once installed, you should be able to check your Java version from your console or terminal.</p>
<p>On MacOS/Linux:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ java -verison
java version &quot;1.8.0_73&quot;
Java(TM) SE Runtime Environment (build 1.8.0_73-b02)
Java HotSpot(TM) 64-Bit Server VM (build 25.73-b02, mixed mode)
</pre></div></div>
<p>Or on Windows:</p>

<div class="source">
<div class="source"><pre class="prettyprint">C:\Users\Me&gt; java -version
java version &quot;1.8.0_161&quot;
Java(TM) SE Runtime Environment (build 1.8.0_16-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)
</pre></div></div>
<p>Next we need to install <a class="externalLink" href="http://maven.apache.org/install.html">Maven</a>, a tool for automating the building and set up of Java projects. Once installed, you should be able to access it on your console/terminal as the <tt>mvn</tt> command. Here is the version check output on MacOS.</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ mvn -version
Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T01:58:13-06:00)
Maven home: /usr/local/Cellar/maven/3.5.2/libexec
Java version: 1.8.0_73, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_73.jdk/Contents/Home/jre
Default locale: en_CA, platform encoding: UTF-8
OS name: &quot;mac os x&quot;, version: &quot;10.13.3&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;
</pre></div></div>
<p>With those tools installed, download a ZIP version or use Git to clone the <a class="externalLink" href="https://github.com/openfirmware/ets-cdb10">ets-cdb10 repository from GitHub</a>.</p>
<p>Use your console or terminal to open the repository on the command line, and use Maven to set up the project.</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ cd ets-cdb10
$ mvn install
</pre></div></div>
<p>This will take under a minute and will do a few things to compile the test suite. It will run the JUnit test suite to check for any broken code in the TestNG test suite. It will compile the documentation into a website for deployment on GitHub/TEAM Engine. It will build ZIP and JAR archive files for the tool and TEAM Engine.</p>
<p>The only file we will need is in the <tt>target</tt> folder, and it is called <tt>ets-cdb10-0.5-SNAPSHOT-aio.jar</tt>. This is the all-in-one file that contains everything the test suite needs to run independently. This file can be deployed to other machines and used to test a CDB.</p></div>
<div class="section">
<h2><a name="Using_the_JAR"></a>Using the JAR</h2>
<p>On the machine you want to test a CDB, you will need to install a Java Virtual Machine to run the all-in-one file. If you already have installed a Java Development Kit then you do not need to also install a JVM. You can <a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">download a JVM from Oracle</a>.</p>
<p>To test the CDB, we need to create a test run properties file that the all-in-one file will read and use to find the CDB. Create a new XML file with the following contents:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;
&lt;properties version=&quot;1.0&quot;&gt;
    &lt;comment&gt;Sample test run arguments&lt;/comment&gt;
    &lt;entry key=&quot;iut&quot;&gt;/path/to/CDB&lt;/entry&gt;
    &lt;entry key=&quot;ics&quot;&gt;1,2&lt;/entry&gt;
&lt;/properties&gt;
</pre></div></div>
<p>On Windows, you will need to change <tt>/path/to/CDB</tt> to the Windows path to the root of the CDB (NOT the directory above the CDB), and Windows users should use Windows path format (e.g. <tt>C:\Databases\CDB</tt>).</p>
<p>Users on MacOS or Linux can use UNIX path style to reference the CDB. It <i>might</i> be possible to reference a CDB on a network drive or mount, although I have not tested it.</p>
<p>In the XML file you can change the &#x201c;1,2&#x201d; for the ICS to either &#x201c;1&#x201d;, &#x201c;2&#x201d;, or &#x201c;1,2&#x201d; to specify which conformance levels you want to test. The default &#x201c;1,2&#x201d; is recommended.</p>
<p>Save the file as an XML file with a descriptive name referring to the CDB it points to.</p>
<p>Now we can use the all-in-one file to test the CDB.</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ java -jar ets-cdb10-0.5-SNAPSHOT-aio.jar path/to/properties.xml
</pre></div></div>
<p>This will launch the test suite without a graphical user interface and generate the test results, usually in a few seconds for small CDBs.</p>
<p>A directory named <tt>testng</tt> will be created in your home directory with the test results. On Windows, that will be in <tt>C:\Users\You\testng</tt> (or elsewhere if you have changed your default user setup). On MacOS, that will be in <tt>/Users/you/testng</tt>. On Linux, that will be in <tt>/home/you/testng</tt>.</p>
<p>Inside the <tt>testng</tt> directory a sub-folder with a UUID name will be created each time the test suite is ran. That UUID directory will contain an XML file with the test results.</p>
<p>If you are not familiar with XML, the test results file will be difficult to read. The very first line will give a basic overview:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;testng-results skipped=&quot;10&quot; failed=&quot;46&quot; total=&quot;82&quot; passed=&quot;26&quot;&gt;
</pre></div></div>
<p>I created a tool that can <a class="externalLink" href="https://github.com/openfirmware/testng2html">convert these XML files into simple HTML files</a> that you can view in your web browser. There is also a more well-developed tool for doing this called <a class="externalLink" href="https://reportng.uncommons.org">ReportNG</a>, although it is no longer updated.</p>
<p><img src="img/jar-testnghtml.png" alt="TestNG2HTML Output" /></p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2023
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>